# üìê Environment Configuration - Worktree-Forms
# Copy this file to .env and update values for your environment
#
# üöÄ PRODUCTION (Dokploy): Use Docker service names (minio, db-service-name)
# üíª LOCAL DEV: Use external IPs and ports (see MinIO section below)

# --- App Core ---
NODE_ENV=production  # or "development" for local

# Frontend Port (Main Entry)
PORT=3100

# Backend Port (Internal)
BACKEND_PORT=5100

# Bind to all interfaces (required for Docker)
HOSTNAME=0.0.0.0

# Public URL of the application
NEXT_PUBLIC_APP_URL=https://worktree.pro

# --- Database ---
# Use Docker service name for internal communication
# Format: postgresql://user:password@service-name:port/database
DATABASE_URL=postgresql://user:password@database-service:5432/dbname

# --- Security ---
JWT_SECRET=your_32_character_secret_key_here
JWT_EXPIRE=15m
JWT_REFRESH_EXPIRE=7d

# --- Object Storage (MinIO) ---
# üåê SIMPLIFIED CONFIGURATION: Use MINIO_PUBLIC_URL for external access
# When MINIO_PUBLIC_URL is set, it will be used for ALL MinIO operations
# This bypasses Docker internal networking and uses domain routing instead

# MinIO Access Credentials (Required):
MINIO_ACCESS_KEY=your_access_key
MINIO_SECRET_KEY=your_secret_key
MINIO_BUCKET_NAME=worktree
MINIO_REGION=us-east-1

# Public MinIO URL (Required for production):
# Set this to use external domain routing (no port needed, domain handles routing)
MINIO_PUBLIC_URL=https://api.worktree.worktree.pro

# Optional: Internal Docker networking (not used when MINIO_PUBLIC_URL is set)
# Only needed if you want to use Docker internal networking instead of external domain
# MINIO_HOST=minio                    # Docker service name
# MINIO_PORT=9004                     # MinIO API port
# MINIO_USE_SSL=false                 # No SSL for internal Docker network

# --- Frontend Config ---
# Backend host for Next.js rewrites (internal container communication)
BACKEND_HOST=localhost

# Public API URL for client-side requests
NEXT_PUBLIC_API_URL=https://worktree.pro/api

# Public MinIO URL for client-side image access
NEXT_PUBLIC_MINIO_URL=https://api.worktree.worktree.pro
