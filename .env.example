# üìê Environment Configuration - Worktree-Forms
# Copy this file to .env and update values for your environment
#
# üöÄ PRODUCTION (Dokploy): Use Docker service names (minio, db-service-name)
# üíª LOCAL DEV: Use external IPs and ports (see MinIO section below)

# --- App Core ---
NODE_ENV=production  # or "development" for local

# Frontend Port (Main Entry)
PORT=3100

# Backend Port (Internal)
BACKEND_PORT=5100

# Bind to all interfaces (required for Docker)
HOSTNAME=0.0.0.0

# Public URL of the application
NEXT_PUBLIC_APP_URL=https://worktree.pro

# --- Database ---
# Use Docker service name for internal communication
# Format: postgresql://user:password@service-name:port/database
DATABASE_URL=postgresql://user:password@database-service:5432/dbname

# --- Redis ---
REDIS_PASSWORD=your-redis-password-here

# --- Security ---
JWT_SECRET=your_32_character_secret_key_here
JWT_EXPIRE=15m
JWT_REFRESH_EXPIRE=7d

# --- Object Storage (MinIO) ---
# üè≠ PRODUCTION (Dokploy): Use internal Docker networking
# üíª LOCAL DEV: Use external API URL

# MinIO Access Credentials (Required):
MINIO_ACCESS_KEY=your_access_key
MINIO_SECRET_KEY=your_secret_key
MINIO_BUCKET_NAME=worktree
MINIO_REGION=us-east-1

# For PRODUCTION (Dokploy) - Internal Docker networking:
# Set these in Dokploy environment variables:
# MINIO_HOST=minio
# MINIO_PORT=9004
# MINIO_USE_SSL=false
# MINIO_PUBLIC_URL=https://minio.worktree.pro  (for presigned URLs)

# For LOCAL DEV - External API:
# Use MINIO_PUBLIC_URL only (no MINIO_HOST/PORT/USE_SSL)
MINIO_PUBLIC_URL=https://api.worktree.worktree.pro

# --- Frontend Config ---
# Backend host for Next.js rewrites (internal container communication)
BACKEND_HOST=localhost

# Public API URL for client-side requests
NEXT_PUBLIC_API_URL=https://worktree.pro/api

# Public MinIO URL for client-side image access
# LOCAL DEV: Use external API
NEXT_PUBLIC_MINIO_URL=https://api.worktree.worktree.pro
# PRODUCTION: Use Console UI (set in Dokploy)
# NEXT_PUBLIC_MINIO_URL=https://minio.worktree.pro
