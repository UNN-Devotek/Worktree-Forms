# Story 0.0: Project Initialization

Status: done

<!-- Note: Validation is optional. Run validate-create-story for quality check before dev-story. -->

## Story

As a Developer,
I want to align the existing codebase with the new Modular Monolith architecture,
so that I can build upon the existing T3/Next.js foundation without data loss.

## Acceptance Criteria

1.  **Given** the existing code in `apps/frontend`
2.  **When** I audit the project structure
3.  **Then** I ensure all required dependencies (Next.js 14, Prisma, Tailwind, NextAuth) are present
4.  **And** the `features` directory contains all required domains: `projects`, `forms`, `sheets`, `users`, `notifications`, `offline`, `lib`, `server`
5.  **And** the core configuration (ESLint, Prettier, Docker) matches the Architecture standards.

## Tasks / Subtasks

- [x] Task 1: Environment Verification (AC: 1, 3, 5)
  - [x] Verify `package.json` in `apps/frontend` has Next.js 14, Prisma, Tailwind, NextAuth
  - [x] Verify `docker-compose.yml` exists in root and contains Postgres, Redis, MinIO services
  - [x] Verify `.env` configuration keys exist

- [x] Task 2: Feature Scaffolding (AC: 4)
  - [x] Create missing feature folders in `apps/frontend/features`:
    - [x] `projects`
    - [x] `forms`
    - [x] `sheets`
    - [x] `users`
    - [x] `notifications`
    - [x] `offline`
    - [x] `documents`
    - [x] `routing`
  - [x] Ensure specific subfolders (`components`, `server`, `hooks`) exist within each feature (as per Architecture "The Feature Rule")

## Dev Notes

### Architecture Patterns & Constraints

- **Stack**: Next.js 14, Prisma, Tailwind, NextAuth (Auth.js v5)
- **Monolith Structure**: Strictly adhere to `src/features/{domain}` for all business logic.
- **Self-Hosting**: Ensure `docker-compose.yml` is robust (Postgres 16, Redis, MinIO).

### Project Structure Notes

- **Features Directory**: This is the core modification to the standard T3 layout.
- **Clean Slate**: Remove any "example" code generated by T3 (e.g., TRPC router if accidentally included, or example posts).

### References

- [Source: architecture.md#Starter-Template-Evaluation](file:///c:/Users/White/Documents/Worktree/Worktree/_bmad-output/planning-artifacts/architecture.md#Starter-Template-Evaluation)
- [Source: epics.md#Story-0.0:-Project-Initialization](file:///c:/Users/White/Documents/Worktree/Worktree/_bmad-output/planning-artifacts/epics.md#Story-0.0:-Project-Initialization)

## Dev Agent Record

### Agent Model Used

Gemini 2.0 Flash (Facilitator Agent)

### Implementation Notes

- **Environment Verification**:
  - Confirmed Next.js 14, Prisma, Tailwind, NextAuth in `apps/frontend/package.json`.
  - Updated `docker-compose.yml` to include `db` (Postgres 16), `redis`, `minio` for robust self-hosting.
  - Updated `ecosystem.config.js` and `apps/frontend/package.json` to respect environment variables for ports (`PORT`, `BACKEND_PORT`).
  - Added `apps/frontend/.eslintrc.json` and `apps/frontend/.prettierrc` to enforce coding standards.
  - Verified `.env.example` has necessary keys.
- **Feature Scaffolding**:
  - Verified all required feature folders (`projects`, `forms`, `sheets`, `users`, `notifications`, `offline`, `documents`, `routing`) and their subfolders exist.
- **Linting**:
  - `npm run lint` identifies 435 issues (mostly `any` types). These are existing technical debt exposed by the new strict configuration. Fixes deferred to specific feature implementation stories or a dedicated cleanup task. Configuration is now correct per architecture standards.

### Debug Log References

- No debug logs for scaffold story.

### Creation Date

2026-01-13

## File List

- `apps/frontend/package.json` (modified)
- `apps/frontend/package-lock.json` (modified)
- `apps/frontend/.eslintrc.json` (new)
- `apps/frontend/.prettierrc` (new)
- `docker-compose.yml` (modified)
- `ecosystem.config.js` (modified)
- `sprint-status.yaml` (modified)

## Change Log

- 2026-01-14: Updated `docker-compose.yml` to add Postgres, Redis, MinIO services.
- 2026-01-14: Configured ESLint and Prettier for frontend.
- 2026-01-14: Updated `ecosystem.config.js` and start scripts for proper environment variable handling.
